<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Language" content="pt-br">
    <meta charset="UTF-8">
    <style>
      #myDiv {
        width: 30px;
        height: 100px;
        border: 1px outset red;
        background-color: lightblue;
        text-align: center;
      }
    </style>
  </head>
  <body>

  <div id="myDiv">
    <h2>This is a heading in a div element</h2>
    <p>This is some text in a div element.</p>
    <img id="img" src="http://qrfree.kaywa.com/img.php?s=8&d=16494;S;-23.43894;-46.74632;CBPMESP2022HIDRANTESP;;;;">
  </div>
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js" integrity="sha384-NaWTHo/8YCBYJ59830LTz/P4aQZK1sS0SneOgAvhsIl3zBu8r9RevNg5lHCHAuQ/" crossorigin="anonymous"></script>
    <script type="text/javascript">
      
        let img2 = new Image();
        img2.src = `http://qrfree.kaywa.com/img.php?s=8&d=16494;S;-23.43894;-46.74632;CBPMESP2022HIDRANTESP;;;;`
      function generete(){

        let img1 = document.getElementById('img');
        let img3 = new Image();
        img3.src = 'https://i.imgur.com/QJ4AJXKb.jpg';





        //var pdf = new jsPDF('p','pt','a4');

        //pdf.text(20, 20, 'Hello world!');
        //pdf.addImage(img3, 'jpg', 10, 10);


        setTimeout(() => {
          //pdf.save("teste.pdf");
          console.log(img);
        }, 100);


        var doc = new jsPDF();   

        doc.html(document.getElementById('myDiv'), {
           callback: function (doc) {
             doc.save();
           }
        });

/*
                  var pdf = new jsPDF();
                  var img = new Image;
                  img.onload = function() {
                      console.log('exportando');
                      pdf.addImage(this, 100, 100);
                      pdf.save("test.pdf");
                  };
                  img.crossOrigin = "*";  // for demo as we are at different origin than image
                  //img.src = "https://i.imgur.com/QJ4AJXKb.jpg";  // some random imgur image
                  img.src = "http://qrfree.kaywa.com/img.php?s=8&d=16494;S;-23.43894;-46.74632;CBPMESP2022HIDRANTESP;;;;";
                
  */        
        console.log(img2);
        }


        // https://jsfiddle.net/2Ly78bej/10/
    </script>
  </body>
</html>